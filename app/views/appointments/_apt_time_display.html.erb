<!-- This Array of Hash Objects is required to check if there is an AvailableTime object for that date. The offdate is required due to the way the AvailableTime model creates objects. -->
<% offdate = "2000-01-01" %>
<% @all_times = [
  {match_time: "#{offdate} 07:00:00 UTC", slang_time: "7:00AM"},
  {match_time: "#{offdate} 08:00:00 UTC", slang_time: "8:00AM"},
  {match_time: "#{offdate} 09:00:00 UTC", slang_time: "9:00AM"},
  {match_time: "#{offdate} 10:00:00 UTC", slang_time: "10:00AM"},
  {match_time: "#{offdate} 11:00:00 UTC", slang_time: "11:00AM"},
  {match_time: "#{offdate} 12:00:00 UTC", slang_time: "12:00AM"},
  {match_time: "#{offdate} 13:00:00 UTC", slang_time: "1:00PM"},
  {match_time: "#{offdate} 14:00:00 UTC", slang_time: "2:00PM"},
  {match_time: "#{offdate} 15:00:00 UTC", slang_time: "3:00PM"},
  {match_time: "#{offdate} 16:00:00 UTC", slang_time: "4:00PM"},
  {match_time: "#{offdate} 17:00:00 UTC", slang_time: "5:00PM"},
  {match_time: "#{offdate} 18:00:00 UTC", slang_time: "6:00PM"},
  {match_time: "#{offdate} 19:00:00 UTC", slang_time: "7:00PM"} ] %>
<% t_index = 0 %>
<% @all_times.each do |all_time_slot| %>
  <% @times.each do |time_avail| %>
    <!-- This checks if there is a VariableTime object for EACH time. If there is a match then the has object is replaced with the ActiveRecord Object. -->
    <% if time_avail.time == all_time_slot[:match_time] %>
      <% @all_times[t_index] = time_avail %>
    <% end %>
  <% end %>
  <% t_index += 1 %>
<% end %>

<% @all_times.each do |display_time| %>
    <!-- If there is an ActiveRecord object then it is displayed using a partial. It's ID is used as a dynamic identifier. The parameter "data_num" holds the id for easy access later on. -->
    <% if display_time.is_a?(ActiveRecord::Base) %>
    <div id="display_time_<%= display_time.id %>_append" class="display_container time_box" data_num="<%= display_time.id %>">
      <%= render 'appointments/selectable_time', :locals => {:display_time => display_time} %>
    </div>
    <% else %>
    <!-- If there is no ActiveRecord object then only a fake button is displayed to the user. -->
    <div class="display_container">
      <button class="apt_time_box display_time_unselectable"><%= display_time[:slang_time] %></button>
    </div>
    <% end %>
<% end %>
